# Genome Definition Guideline

This document defines the structure and properties of the Genome object in the TangoBotTrainer project.

## Properties of the Genome

1. **CurrentModuleId**:
   - This value is set by the Campaign object when a new cycle starts.
   - Genes created during the current cycle will hold this number permanently.
   - This value is an integer because at each cycle a new value (1, 2, 3, ...) is given.
   - The cycle is a part of the evolutive stage where a skill or set of skills is developed by the genome.
   - The value is called a module because it refers to the genes structure developed during a specific cycle.
   - In the neural network, the genes structure developed during, for instance, Cycle 1, will carry the ModuleId 1.
   - This helps during evolution mutations by preventing old modules that are already trained and well developed from being modified by later mutations, thus avoiding the issue of "forgetting."

2. **TimeCreated**:
   - The time at which the Genome was created. This helps determine the age of the genome.
   - This value is entered at instantiation.

3. **List<IGene> Genes**:
   - The collection of genes in this genome.

4. **string Species**:
   - A random animal name given to the species this genome belongs to.
   - This name is entered at the moment the genome's species is determined.
   - This value is set by an external component.

5. **double Fitness**:
   - The score given to this genome by the Inspector component when its performance is evaluated.

6. **IAgent Agent**:
   - The agent is set by the factory in charge of creating genomes.
   - The agent is important because in the Agent the perceptors and actuators are defined and that is how the minimal genome genes are determined (input and output nodes).

## Methods of the Genome

1. **IGenome CreateBasicGenome(IAgent agent)**:
   - Creates the basic genome based on the Agent's perceptors and actuators.
   - Initializes input nodes based on the agent's perceptors.
   - Initializes output nodes based on the agent's actuators.
   - Initializes a bias node.
   - No connections are created at this point; subsequent mutations will create connections.
   - **Returns**: The created basic genome.

2. **void Mutate(MutationLevels mutationLevel)**:
   - Mutates the current genome instance.
   - Applies mutations to genes based on the specified mutation level.
   - Mutations can include changes to gene properties, enabling/disabling genes, and adding/removing genes.
   - This method modifies the current instance and does not return any value.

3. **IGenome Crossover(IGenome partner, MutationLevels mutationLevel = 0)**:
   - Performs crossover with another genome to create a new genome.
   - Combines genes from both parent genomes based on the specified mutation level.
   - Ensures the resulting genome inherits traits from both parents.
   - **Returns**: The new genome created from the crossover.

4. **IGenome[] Speciate(int speciesCount, int siblingsCount = 0)**:
   - Creates a number of species from the current genome, ensuring that new genomes are of different species.
   - Divides the current genome into multiple species based on genetic diversity.
   - Optionally creates siblings within each species.
   - **Returns**: An array of new genomes representing different species.

5. **IGenome[] SpawnSiblingGenomes(int count, MutationLevels mutationLevels = MutationLevels.DEFAULT)**:
   - Creates a number of siblings from the current genome.
   - Siblings are mutated versions of the current genome but remain in the same species.
   - Applies mutations to create genetic diversity among siblings.
   - **Returns**: An array of sibling genomes.

6. **IGene.IConnectionGene AddConnection(int fromNode, int toNode, double weight)**:
   - Adds a new connection gene to the genome.
   - Creates a connection between the specified nodes with the given weight.
   - Ensures the connection adheres to the established genome policies.
   - **Returns**: The added connection gene.

7. **void AddNewConnection()**:
   - Adds a new connection gene to the genome.
   - Randomly selects nodes to create a new connection.
   - Ensures the connection adheres to the established genome policies.

8. **IGene.INodeGene AddNewNode()**:
   - Adds a new node gene to the genome.
   - Creates a new node and integrates it into the genome's structure.
   - Ensures the new node adheres to the established genome policies.
   - **Returns**: The added node gene.

9. **void FixStructure()**:
   - Fixes the structure of the genome to ensure it adheres to the established policies.
   - Resolves any structural issues, such as dangling genes or invalid connections.
   - Ensures the genome remains functional and consistent.

10. **double CalculateGeneticDifference(IGenome otherGenome)**:
    - Calculates the genetic difference between the current genome and another genome.
    - Evaluates genetic similarity and differences between the two genomes.
    - Returns a number between 0 and 1, where 0 means no difference and 1 means completely different.
    - **Returns**: A double indicating the genetic difference between the genomes.

11. **void AddRandomGene(MutationLevels mutationLevel)**:
    - Adds a random gene to the genome based on the mutation level.
    - Randomly selects a gene type and integrates it into the genome.
    - Ensures the new gene adheres to the established genome policies.

## Using Partial Classes

To manage the complexity of the `Genome` class, we use partial classes to divide groups of functionalities by categories. This approach keeps related methods together while maintaining a clean and organized codebase.

### Example Structure with Partial Classes

1. **Genome.cs**: Core properties and methods.
2. **Genome.Mutation.cs**: Methods related to mutations.
3. **Genome.Structure.cs**: Methods related to structure management.

### Example Code

#### Genome.cs
